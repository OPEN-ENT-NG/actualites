<div class="row contextual-buttons ng-scope">
	<div class="action-buttons" >
		<button ng-click="newThreadView()"><i18n>actualites.edition.thread.new</i18n></button>
		<a ng-click="template.open('main', 'infos-list')"><i18n>actualites.edition.thread.back</i18n></a>
	</div>
</div>

<div class="cell twelve list-view">
	<table class="twelve">
		<thead>
			<tr>
				<th class="one"><input type="checkbox" ng-model="display.selectAllThreads" ng-change="switchAllThreads()" ng-if="hasRightsOnAllThreads()" /></th>
				<th class="six">Titre</th>
				<th class="one">Image</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="thread in threads.all">
				<td><input type="checkbox" ng-model="thread.selected" ng-if="hasRightsOnThread(thread)" /></td>
				<td ng-if="currentThread !== thread">[[thread.title]]</td>
				<td ng-if="currentThread === thread">
					<input translate attr="placeholder" placeholder="actualites.edition.thread.field.title.placeholder" ng-model="currentThread.title" type="text"/>
				</td>

				<td>
					<img skin-src="/img/illustrations/actualites-default.png" ng-if="!thread.icon" class="seven cell" />
					<img ng-src="[[thread.icon]]?thumbnail=120x120" ng-if="thread.icon" class="seven cell" />
				</td>
			</tr>
			
			<!-- Lightbox : Thread share -->
			<div ng-if="display.showPanel">
				<lightbox show="display.showPanel" on-close="display.showPanel = false;">
					<share-panel app-prefix="'actualites'" resources="threads.selection()"></share-panel>
				</lightbox>
			</div>
		
			<section class="toggle-buttons" ng-class="{ hide: threads.selection().length === 0 }">
				<div class="toggle block-container">
					<div class="row">
						<behaviour name="editThread" resource="threads.selection()" class="cell">
							<button
									ng-if="threads.selection().length === 1"
									ng-click="editSelectedThread()"
									>
								<i18n>edit</i18n>
							</button>
						</behaviour>
						<behaviour name="deleteThread" resource="threads.selection()" class="cell">
							<button 
									ng-click="threads.removeSelection()"
									>
								<i18n>remove</i18n>
							</button>
						</behaviour>
						<behaviour name="share" resource="threads.selection()" class="cell">
							<button ng-click="display.showPanel = true">
								<i18n>share</i18n>
							</button>
						</behaviour>
					</div>
				</div>
			</section>
		</tbody>
	</table>

	<hr />
	

</div>